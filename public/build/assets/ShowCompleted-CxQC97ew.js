import{j as e,H as o,L as u}from"./app-DLu82VbL.js";import{P as x}from"./PreparerLayout-CIPI0HSY.js";import{m as h,R as g,n as _,h as j,S as y,q as N,T as b}from"./index-UdTL3sIO.js";/* empty css            */function S({invoice:t}){let a;t&&t.items&&t.items.length>0?a={sale_number:t.sale_number,customer_name:t.customer_name||t.customer&&t.customer.name,customer_phone:t.customer_phone||t.customer&&t.customer.phone,total_amount:t.total_amount,created_at:t.created_at,completed_at:t.completed_at,items:t.items.map(s=>({id:s.id,name:s.product&&(s.product.name_ar||s.product.name_en||s.product.name)||s.name,quantity:s.quantity,unit:s.product?s.product.unit_ar||s.product.unit||"":s.unit||"",image:s.product?s.product.image_url||s.product.image:null})),seller_representative:t.sellerRepresentative||t.seller_representative,primary_supplier:t.primarySupplier||t.primary_supplier,items_count:t.items_count,status:t.status,delivery_status:t.delivery_status}:a={sale_number:"INV-2025-001",customer_name:"أحمد محمد علي",customer_phone:"07701234567",total_amount:25e4,created_at:"2025-08-29T10:30:00",completed_at:"2025-08-29T11:00:00",items:[{id:1,name:"منتج 1",quantity:2,unit:"قطعة",price:1e4},{id:2,name:"منتج 2",quantity:1,unit:"كرتون",price:5e4},{id:3,name:"منتج 3",quantity:5,unit:"قطعة",price:2e3}],seller_representative:{name:"محمد الأحمد",phone:"07809876543"},primary_supplier:{name_ar:"مورد المواد الغذائية"},items_count:8,status:"completed",delivery_status:"تم التسليم"};const r=a.items.reduce((s,l)=>{const m=t&&t.items&&t.items.find(i=>i.id===l.id)?.product,d=parseFloat(m?.piece_weight_grams)||0,c=parseFloat(m?.pieces_per_carton)||1,p=parseFloat(l.quantity)||0;return s+p*c*d},0),n=r/1e3;return e.jsxs(x,{title:`تفاصيل الفاتورة ${a.sale_number}`,children:[e.jsx(o,{title:`تفاصيل الفاتورة ${a.sale_number}`}),e.jsxs("div",{className:"max-w-md mx-auto p-2 sm:p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(u,{href:"/preparer/invoices/completed",className:"text-green-600 flex items-center text-sm",children:[e.jsx(h,{className:"ml-1"})," رجوع"]}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:a.delivery_status||"مكتمل"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(g,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-bold text-lg",children:a.sale_number})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm",children:[e.jsx(_,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.customer_name}),e.jsx(j,{className:"w-4 h-4 text-gray-400 ml-2"}),e.jsx("span",{children:a.customer_phone})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm",children:[e.jsx(y,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[parseInt(a.total_amount).toLocaleString("en-US")," IQD"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs text-gray-500",children:[e.jsx(N,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["تم التجهيز: ",new Date(a.completed_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(b,{className:"w-5 h-5 text-green-500 ml-2"}),e.jsxs("span",{className:"font-bold",children:["المنتجات (",a.items.length,")"]})]}),e.jsx("ul",{className:"divide-y divide-gray-100",children:a.items.map(s=>e.jsxs("li",{className:"py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.image?s.image.startsWith("http")?s.image:`/storage/${s.image}`:"/images/no-product-image.png",alt:s.name,className:"w-10 h-10 object-cover rounded ml-2 border",onError:l=>{l.target.src="/images/no-product-image.png"}}),e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"mx-2 text-xs text-gray-500",children:["(",s.unit,")"]})]}),e.jsx("div",{className:"text-sm text-gray-700 font-bold",children:s.quantity})]},s.id))}),e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg border border-purple-200 text-center",children:[e.jsx("div",{className:"font-semibold text-purple-900 mb-1",children:"الوزن الكلي للفاتورة"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[r>0?r.toLocaleString():"0"," غرام"]}),n>=1&&e.jsxs("div",{className:"text-lg text-purple-600 mt-1",children:["(",n.toFixed(2)," كيلو غرام)"]}),r===0&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"(لا توجد بيانات وزن للمنتجات)"})]})]})]})]})}export{S as default};
