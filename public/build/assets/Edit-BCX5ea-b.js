import{r as m,u as p,j as e,H as j,L as x}from"./app-nFOrUbza.js";import{R as f}from"./RepresentativeLayout-7ylgactW.js";import{G as w,n as y,h as N,c as u,R as v,S as _,T as k,f as F,i as C,j as S,P as $}from"./index-CQIIe2w9.js";/* empty css            */const R=({representative_user:L,customer:l})=>{const[o,d]=m.useState(!1),[n,i]=m.useState(!1),{data:t,setData:r,put:g,processing:c,errors:a}=p({name:l.name||"",phone:l.phone||"",location_text:l.location_text||"",latitude:l.latitude||"",longitude:l.longitude||"",notes:l.notes||"",is_active:l.is_active}),h=s=>{s.preventDefault(),g(route("representatives.customers.update",l.id))},b=()=>{navigator.geolocation?(i(!0),navigator.geolocation.getCurrentPosition(s=>{r({...t,latitude:s.coords.latitude.toString(),longitude:s.coords.longitude.toString()}),i(!1),d(!0)},s=>{i(!1),alert("لا يمكن الحصول على الموقع الحالي. تأكد من تفعيل خدمة الموقع.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):alert("المتصفح لا يدعم خدمة تحديد الموقع")};return e.jsxs(f,{title:`تعديل العميل - ${l.name}`,children:[e.jsx(j,{title:`تعديل العميل - ${l.name}`}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-2 py-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-lg p-6 text-white mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"تعديل العميل"}),e.jsx("p",{className:"opacity-90",children:l.name})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(FaEdit,{className:"text-4xl mb-1 mx-auto opacity-90"}),e.jsx("div",{className:"text-sm opacity-90",children:"تحديث البيانات"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(x,{href:route("representatives.customers.show",l.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),"العودة للتفاصيل"]})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(y,{className:"inline w-4 h-4 ml-2"}),"اسم العميل *"]}),e.jsx("input",{type:"text",value:t.name,onChange:s=>r("name",s.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"أدخل اسم العميل",required:!0}),a.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(N,{className:"inline w-4 h-4 ml-2"}),"رقم الهاتف"]}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>r("phone",s.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.phone?"border-red-500":"border-gray-300"}`,placeholder:"أدخل رقم الهاتف",inputMode:"tel"}),a.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.phone})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(u,{className:"inline w-4 h-4 ml-2"}),"موقع العميل"]}),e.jsx("textarea",{value:t.location_text,onChange:s=>r("location_text",s.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4 ${a.location_text?"border-red-500":"border-gray-300"}`,placeholder:"وصف الموقع (عنوان، معالم، إلخ)",rows:"3"}),a.location_text&&e.jsx("p",{className:"mb-3 text-sm text-red-600",children:a.location_text}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"button",onClick:b,disabled:n,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:[n?e.jsx(v,{className:"w-5 h-5 animate-spin"}):e.jsx(_,{className:"w-5 h-5"}),n?"جارِ تحديد الموقع...":"استخدام الموقع الحالي"]}),t.latitude&&t.longitude&&e.jsxs("button",{type:"button",onClick:()=>d(!o),className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-medium",children:[e.jsx(u,{className:"w-5 h-5"}),o?"إخفاء الخريطة":"عرض على الخريطة"]})]}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-sm text-gray-600 cursor-pointer p-2 bg-gray-50 rounded",children:"الإحداثيات التفصيلية (اختياري)"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"خط العرض"}),e.jsx("input",{type:"number",step:"any",value:t.latitude,onChange:s=>r("latitude",s.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"33.3152"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"خط الطول"}),e.jsx("input",{type:"number",step:"any",value:t.longitude,onChange:s=>r("longitude",s.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"44.3661"})]})]})]}),o&&t.latitude&&t.longitude&&e.jsxs("div",{className:"mt-4 rounded-lg overflow-hidden border",children:[e.jsx("div",{className:"bg-gray-100 p-2 text-center text-sm text-gray-600",children:"موقع العميل على الخريطة"}),e.jsxs("div",{className:"relative",children:[e.jsx("iframe",{src:`https://www.google.com/maps?q=${t.latitude},${t.longitude}&hl=ar&z=16&output=embed`,width:"100%",height:"250",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full"}),e.jsx("button",{type:"button",onClick:()=>{const s=`https://www.google.com/maps?q=${t.latitude},${t.longitude}`;window.open(s,"_blank")},className:"absolute top-2 right-2 bg-white p-2 rounded-lg shadow-md text-blue-600 hover:bg-blue-50",children:e.jsx(k,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(F,{className:"inline w-4 h-4 ml-2"}),"ملاحظات"]}),e.jsx("textarea",{value:t.notes,onChange:s=>r("notes",s.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.notes?"border-red-500":"border-gray-300"}`,placeholder:"أي ملاحظات إضافية حول العميل",rows:"4"}),a.notes&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.notes})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"حالة العميل"}),e.jsxs("button",{type:"button",onClick:()=>r("is_active",!t.is_active),className:`w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg transition-colors text-lg font-medium ${t.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:[t.is_active?e.jsx(C,{className:"w-5 h-5"}):e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:t.is_active?"نشط":"غير نشط"})]}),a.is_active&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.is_active})]}),e.jsxs("div",{className:"space-y-3 pb-4",children:[e.jsxs("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:[e.jsx($,{className:"w-5 h-5"}),c?"جارِ الحفظ...":"حفظ التغييرات"]}),e.jsx(x,{href:route("representatives.customers.show",l.id),className:"w-full block text-center px-6 py-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-lg font-medium",children:"إلغاء"})]})]})]})]})};export{R as default};
