import{r as n,j as e,H as F,L as _}from"./app-DjANfjSe.js";import{A as C}from"./AdminLayout-DYBrdYmn.js";import{e as T,f as D,g as I,h as L,a as $}from"./index-y56Sslxe.js";/* empty css            */function H({invoices:s={data:[]},representatives:j=[],filters:r={},total:b=0}){const[l,p]=n.useState(r.search||""),[i,u]=n.useState(r.status||""),[d,h]=n.useState(r.representative_id||""),[c,g]=n.useState(r.date_from||""),[o,y]=n.useState(r.date_to||""),x=t=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0).replace("IQD","د.ع"),f=t=>new Date(t).toLocaleDateString("ar-IQ"),N=t=>({pending:"bg-yellow-100 text-yellow-800",preparing:"bg-blue-100 text-blue-800",shipping:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",returned:"bg-orange-100 text-orange-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",w=t=>({pending:"قيد الانتظار",preparing:"قيد التجهيز",shipping:"قيد التوصيل",delivered:"تم التسليم",returned:"مسترجع",cancelled:"ملغية"})[t]||t,v=()=>{const t=new URLSearchParams;l&&t.append("search",l),i&&t.append("status",i),d&&t.append("representative_id",d),c&&t.append("date_from",c),o&&t.append("date_to",o),window.location.href=`/admin/invoices?${t.toString()}`},S=()=>{p(""),u(""),h(""),g(""),y(""),window.location.href="/admin/invoices"},k=(t,a)=>{confirm("هل أنت متأكد من تحديث حالة الفاتورة؟")&&fetch(`/admin/invoices/${t}/status`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({status:a})}).then(m=>m.json()).then(m=>{m.success&&window.location.reload()}).catch(console.error)};return e.jsxs(C,{children:[e.jsx(F,{title:"إدارة الفواتير - الإدارة"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الفواتير"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"عرض وإدارة جميع الفواتير في النظام"})]}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["المجموع: ",b," فاتورة"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البحث"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:t=>p(t.target.value),placeholder:"رقم الفاتورة أو اسم العميل...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),e.jsxs("select",{value:i,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"جميع الحالات"}),e.jsx("option",{value:"pending",children:"قيد الانتظار"}),e.jsx("option",{value:"preparing",children:"قيد التجهيز"}),e.jsx("option",{value:"shipping",children:"قيد التوصيل"}),e.jsx("option",{value:"delivered",children:"تم التسليم"}),e.jsx("option",{value:"returned",children:"مسترجع"}),e.jsx("option",{value:"cancelled",children:"ملغية"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المندوب"}),e.jsxs("select",{value:d,onChange:t=>h(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"جميع المندوبين"}),j.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"من تاريخ"}),e.jsx("input",{type:"date",value:c,onChange:t=>g(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إلى تاريخ"}),e.jsx("input",{type:"date",value:o,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-end space-x-2 space-x-reverse",children:[e.jsxs("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(I,{className:"w-4 h-4 ml-2"}),"تطبيق"]}),e.jsx("button",{onClick:S,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"مسح"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"رقم الفاتورة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المندوب"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"العميل"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"إجمالي المبلغ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المدفوع"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المتبقي"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التاريخ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"إجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",t.invoice_number]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.representative?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.customer?.customer_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(t.total_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:x(t.paid_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:x(t.remaining_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(t.status)}`,children:w(t.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(_,{href:`/admin/invoices/${t.id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsxs("select",{value:t.status,onChange:a=>k(t.id,a.target.value),className:"text-xs border-gray-300 rounded",children:[e.jsx("option",{value:"pending",children:"قيد الانتظار"}),e.jsx("option",{value:"preparing",children:"قيد التجهيز"}),e.jsx("option",{value:"shipping",children:"قيد التوصيل"}),e.jsx("option",{value:"delivered",children:"تم التسليم"}),e.jsx("option",{value:"returned",children:"مسترجع"}),e.jsx("option",{value:"cancelled",children:"ملغية"})]})]})})]},t.id))})]})}),s.data.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد فواتير"}),e.jsx("p",{className:"text-gray-500",children:"لم يتم العثور على فواتير بالمعايير المحددة"})]})]}),s.links&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["عرض ",s.from," إلى ",s.to," من أصل ",s.total," فاتورة"]}),e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:s.links.map((t,a)=>e.jsx("a",{href:t.url,className:`px-3 py-2 rounded-md text-sm font-medium ${t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})]})})]})]})}export{H as default};
