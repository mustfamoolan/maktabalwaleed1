import{r as n,u as w,j as e,H as y,L as x}from"./app-nFOrUbza.js";import{R as N}from"./RepresentativeLayout-7ylgactW.js";import{Q as v,G as k,n as S,h as C,c as g,R as F,S as L,T as _,f as M,P as A}from"./index-CQIIe2w9.js";/* empty css            */const O=({representative_user:E})=>{const[i,c]=n.useState(!1),[d,o]=n.useState(!1),[$,u]=n.useState({lat:33.3152,lng:44.3661}),{data:s,setData:l,post:p,processing:m,errors:a,reset:b}=w({name:"",phone:"",location_text:"",latitude:"",longitude:"",notes:""}),h=t=>{t.preventDefault(),p(route("representatives.customers.store"),{onSuccess:()=>{b()}})},f=()=>{o(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const r=t.coords.latitude.toString(),j=t.coords.longitude.toString();l({...s,latitude:r,longitude:j}),u({lat:t.coords.latitude,lng:t.coords.longitude}),c(!0),o(!1)},t=>{o(!1);let r="لا يمكن الحصول على الموقع الحالي";switch(t.code){case t.PERMISSION_DENIED:r="يرجى السماح بالوصول للموقع في المتصفح";break;case t.POSITION_UNAVAILABLE:r="معلومات الموقع غير متوفرة";break;case t.TIMEOUT:r="انتهت مهلة البحث عن الموقع";break}alert(r)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):(o(!1),alert("المتصفح لا يدعم خدمة تحديد الموقع"))};return n.useEffect(()=>{s.latitude&&s.longitude&&u({lat:parseFloat(s.latitude),lng:parseFloat(s.longitude)})},[s.latitude,s.longitude]),e.jsxs(N,{title:"إضافة عميل جديد",children:[e.jsx(y,{title:"إضافة عميل جديد"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-2 py-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"إضافة عميل جديد"}),e.jsx("p",{className:"opacity-90",children:"أضف عميل جديد إلى قاعدة بياناتك"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"text-4xl mb-1 mx-auto opacity-90"}),e.jsx("div",{className:"text-sm opacity-90",children:"عميل جديد"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(x,{href:route("representatives.customers.index"),className:"inline-flex items-center gap-2 px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors",children:[e.jsx(k,{className:"w-4 h-4"}),"العودة للقائمة"]})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(S,{className:"inline w-4 h-4 ml-2"}),"اسم العميل *"]}),e.jsx("input",{type:"text",value:s.name,onChange:t=>l("name",t.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"أدخل اسم العميل",required:!0}),a.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(C,{className:"inline w-4 h-4 ml-2"}),"رقم الهاتف"]}),e.jsx("input",{type:"tel",value:s.phone,onChange:t=>l("phone",t.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.phone?"border-red-500":"border-gray-300"}`,placeholder:"أدخل رقم الهاتف",inputMode:"tel"}),a.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.phone})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(g,{className:"inline w-4 h-4 ml-2"}),"موقع العميل"]}),e.jsx("textarea",{value:s.location_text,onChange:t=>l("location_text",t.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4 ${a.location_text?"border-red-500":"border-gray-300"}`,placeholder:"وصف الموقع (عنوان، معالم، إلخ)",rows:"3"}),a.location_text&&e.jsx("p",{className:"mb-3 text-sm text-red-600",children:a.location_text}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"button",onClick:f,disabled:d,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:[d?e.jsx(F,{className:"w-5 h-5 animate-spin"}):e.jsx(L,{className:"w-5 h-5"}),d?"جارِ تحديد الموقع...":"استخدام الموقع الحالي"]}),s.latitude&&s.longitude&&e.jsxs("button",{type:"button",onClick:()=>c(!i),className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-medium",children:[e.jsx(g,{className:"w-5 h-5"}),i?"إخفاء الخريطة":"عرض على الخريطة"]})]}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-sm text-gray-600 cursor-pointer p-2 bg-gray-50 rounded",children:"الإحداثيات التفصيلية (اختياري)"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"خط العرض"}),e.jsx("input",{type:"number",step:"any",value:s.latitude,onChange:t=>l("latitude",t.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"33.3152"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"خط الطول"}),e.jsx("input",{type:"number",step:"any",value:s.longitude,onChange:t=>l("longitude",t.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"44.3661"})]})]})]}),i&&s.latitude&&s.longitude&&e.jsxs("div",{className:"mt-4 rounded-lg overflow-hidden border",children:[e.jsx("div",{className:"bg-gray-100 p-2 text-center text-sm text-gray-600",children:"موقع العميل على الخريطة"}),e.jsxs("div",{className:"relative",children:[e.jsx("iframe",{src:`https://www.google.com/maps?q=${s.latitude},${s.longitude}&hl=ar&z=16&output=embed`,width:"100%",height:"250",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full"}),e.jsx("button",{type:"button",onClick:()=>{const t=`https://www.google.com/maps?q=${s.latitude},${s.longitude}`;window.open(t,"_blank")},className:"absolute top-2 right-2 bg-white p-2 rounded-lg shadow-md text-blue-600 hover:bg-blue-50",children:e.jsx(_,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(M,{className:"inline w-4 h-4 ml-2"}),"ملاحظات"]}),e.jsx("textarea",{value:s.notes,onChange:t=>l("notes",t.target.value),className:`w-full px-4 py-3 text-lg border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.notes?"border-red-500":"border-gray-300"}`,placeholder:"أي ملاحظات إضافية حول العميل",rows:"4"}),a.notes&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.notes})]}),e.jsxs("div",{className:"space-y-3 pb-4",children:[e.jsxs("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:[e.jsx(A,{className:"w-5 h-5"}),m?"جارِ الحفظ...":"حفظ العميل"]}),e.jsx(x,{href:route("representatives.customers.index"),className:"w-full block text-center px-6 py-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-lg font-medium",children:"إلغاء"})]})]})]})]})};export{O as default};
