import{r as u,u as g,j as e,a as f}from"./app-C7cjIxtJ.js";import{X as j,S as y,n as o}from"./index-DjG75rFv.js";import{P as v}from"./plus-EaxzMuIf.js";import{U as N,P as w,M as _,L as k,E as P,a as S}from"./user-CWrMXrbC.js";import"./app-D2X_br3j.js";import"./createLucideIcon-OegKdwhO.js";function L({isOpen:x,onClose:d,onSuccess:c}){const[i,p]=u.useState(!1),[m,n]=u.useState(!1),{data:a,setData:l,errors:s,reset:b}=g({name_ar:"",phone:"",password:"",address:"",is_active:!0}),h=r=>{r.preventDefault(),n(!0),f.post(route("admin.sales-representatives.store"),{name_ar:a.name_ar,phone:a.phone,address:a.address,password:a.password,is_active:a.is_active,quick_add:!0},{onSuccess:t=>{n(!1),b(),d(),o.success("تم إضافة المندوب بنجاح! يمكنك الآن إكمال بياناته."),c&&c()},onError:t=>{n(!1),console.error("Validation errors:",t),t.name_ar?o.error(t.name_ar[0]):t.phone?o.error(t.phone[0]):t.password?o.error(t.password[0]):o.error("يرجى التحقق من البيانات المدخلة")},onFinish:()=>{n(!1)}})};return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-600"}),"إضافة مندوب جديد"]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(j,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المندوب *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:a.name_ar,onChange:r=>l("name_ar",r.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.name_ar?"border-red-300":"border-gray-300"}`,placeholder:"أدخل اسم المندوب",required:!0})]}),s.name_ar&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name_ar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف *"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:a.phone,onChange:r=>l("phone",r.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.phone?"border-red-300":"border-gray-300"}`,placeholder:"05xxxxxxxx",required:!0})]}),s.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute right-3 top-3 text-gray-400 w-5 h-5"}),e.jsx("textarea",{value:a.address,onChange:r=>l("address",r.target.value),rows:3,className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.address?"border-red-300":"border-gray-300"}`,placeholder:"أدخل عنوان المندوب"})]}),s.address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور *"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:i?"text":"password",value:a.password,onChange:r=>l("password",r.target.value),className:`w-full pr-10 pl-10 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>p(!i),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(P,{className:"w-5 h-5"}):e.jsx(S,{className:"w-5 h-5"})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:a.is_active,onChange:r=>l("is_active",r.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"mr-3 block text-sm text-gray-900",children:"مندوب نشط"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"ملاحظة:"})," سيتم إضافة المندوب بالمعلومات الأساسية. يمكنك إكمال بقية التفاصيل (الراتب، الحوافز، المعلومات المالية) لاحقاً من خلال تعديل بيانات المندوب."]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),m?"جاري الحفظ...":"إضافة المندوب"]})]})]})]})}):null}export{L as default};
