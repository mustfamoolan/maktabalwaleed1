import{r as g,u as h,j as e,H as p,L as i}from"./app-nFOrUbza.js";import{R as b}from"./RepresentativeLayout-7ylgactW.js";import{G as j,n as f,h as v,c as d,T as y,f as N,i as w,j as _,P as k}from"./index-CQIIe2w9.js";/* empty css            */const M=({representative_user:C,customer:a})=>{const[n,c]=g.useState(!1),{data:r,setData:l,put:x,processing:o,errors:t}=h({name:a.name||"",phone:a.phone||"",location_text:a.location_text||"",latitude:a.latitude||"",longitude:a.longitude||"",notes:a.notes||"",is_active:a.is_active}),m=s=>{s.preventDefault(),x(route("representatives.customers.update",a.id))},u=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{l({...r,latitude:s.coords.latitude.toString(),longitude:s.coords.longitude.toString()})},s=>{alert("لا يمكن الحصول على الموقع الحالي")}):alert("المتصفح لا يدعم خدمة تحديد الموقع")};return e.jsxs(b,{title:`تعديل العميل - ${a.name}`,children:[e.jsx(p,{title:`تعديل العميل - ${a.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"تعديل العميل"}),e.jsxs("p",{className:"text-gray-600",children:["تحديث بيانات العميل: ",a.name]})]}),e.jsxs(i,{href:route("representatives.customers.show",a.id),className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"العودة للتفاصيل"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"تعديل بيانات العميل"})}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم العميل *"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>l("name",s.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.name?"border-red-500":"border-gray-300"}`,placeholder:"أدخل اسم العميل",required:!0})]}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>l("phone",s.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.phone?"border-red-500":"border-gray-300"}`,placeholder:"أدخل رقم الهاتف"})]}),t.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.phone})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الموقع"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute right-3 top-3 text-gray-400 w-4 h-4"}),e.jsx("textarea",{value:r.location_text,onChange:s=>l("location_text",s.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.location_text?"border-red-500":"border-gray-300"}`,placeholder:"وصف الموقع (عنوان، معالم، إلخ)",rows:"3"})]}),t.location_text&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.location_text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط العرض (Latitude)"}),e.jsx("input",{type:"number",step:"any",value:r.latitude,onChange:s=>l("latitude",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.latitude?"border-red-500":"border-gray-300"}`,placeholder:"مثال: 33.3152"}),t.latitude&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.latitude})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط الطول (Longitude)"}),e.jsx("input",{type:"number",step:"any",value:r.longitude,onChange:s=>l("longitude",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.longitude?"border-red-500":"border-gray-300"}`,placeholder:"مثال: 44.3661"}),t.longitude&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.longitude})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"الحصول على الموقع الحالي"]}),e.jsxs("button",{type:"button",onClick:()=>c(!n),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),n?"إخفاء الخريطة":"عرض على الخريطة"]})]}),n&&r.latitude&&r.longitude&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"موقع العميل على الخريطة:"}),e.jsx("div",{className:"bg-white rounded border overflow-hidden",children:e.jsx("iframe",{src:`https://www.google.com/maps?q=${r.latitude},${r.longitude}&hl=ar&z=15&output=embed`,width:"100%",height:"300",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute right-3 top-3 text-gray-400 w-4 h-4"}),e.jsx("textarea",{value:r.notes,onChange:s=>l("notes",s.target.value),className:`w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.notes?"border-red-500":"border-gray-300"}`,placeholder:"أي ملاحظات إضافية حول العميل",rows:"4"})]}),t.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.notes})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة العميل"}),e.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:e.jsxs("button",{type:"button",onClick:()=>l("is_active",!r.is_active),className:`flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-lg transition-colors ${r.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:[r.is_active?e.jsx(w,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:r.is_active?"نشط":"غير نشط"})]})}),t.is_active&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.is_active})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),o?"جارِ الحفظ...":"حفظ التغييرات"]}),e.jsx(i,{href:route("representatives.customers.show",a.id),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-center",children:"إلغاء"})]})]})]})]})]})};export{M as default};
