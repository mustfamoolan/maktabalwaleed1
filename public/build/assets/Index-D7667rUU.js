import{r as l,j as e,H as w,L as i,a as y}from"./app-DLu82VbL.js";import{R as F}from"./RepresentativeLayout-Dd1lkglj.js";import{F as o,a as C,b as _,c as h,d as m,e as S,N as g,h as L,f as k,k as E,E as M,l as T}from"./index-UdTL3sIO.js";/* empty css            */const $=({representative_user:b,customers:t})=>{const[a,j]=l.useState(""),[x,u]=l.useState(!1),[r,p]=l.useState(""),n=l.useMemo(()=>({total:t.length,active:t.filter(s=>s.is_active).length,inactive:t.filter(s=>!s.is_active).length}),[t]),N=t.filter(s=>s.latitude&&s.longitude).length,d=l.useMemo(()=>t.filter(s=>{const c=s.name.toLowerCase().includes(a.toLowerCase())||s.phone?.toLowerCase().includes(a.toLowerCase())||s.location_text?.toLowerCase().includes(a.toLowerCase()),v=r===""||r==="active"&&s.is_active||r==="inactive"&&!s.is_active;return c&&v}),[t,a,r]),f=(s,c)=>{confirm(`هل أنت متأكد من حذف العميل "${c}"؟`)&&y.delete(route("representatives.customers.destroy",s),{preserveScroll:!0})};return e.jsxs(F,{title:"إدارة العملاء",children:[e.jsx(w,{title:"إدارة العملاء"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 px-2 py-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg p-6 text-white mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"إدارة العملاء"}),e.jsxs("p",{className:"opacity-90",children:["مرحباً ",b.name]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:t.length}),e.jsx("div",{className:"text-sm opacity-90",children:"إجمالي العملاء"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-xs text-gray-600 mb-1",children:"إجمالي العملاء"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.total})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-xs text-gray-600 mb-1",children:"عملاء نشطون"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:n.active})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-xs text-gray-600 mb-1",children:"غير نشطين"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:n.inactive})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(h,{className:"w-5 h-5 text-white"})})}),e.jsx("h3",{className:"text-xs text-gray-600 mb-1",children:"مع مواقع"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:N})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(m,{className:"w-5 h-5 mr-3"}),"البحث والفلترة"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(m,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:a,onChange:s=>j(s.target.value),placeholder:"البحث في العملاء...",className:"w-full pr-10 pl-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>u(!x),className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"فلترة"]}),e.jsxs("span",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-1 rounded-full",children:[d.length," من ",t.length," عميل"]})]}),x&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة العميل"}),e.jsxs("select",{value:r,onChange:s=>p(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"جميع العملاء"}),e.jsx("option",{value:"active",children:"نشط فقط"}),e.jsx("option",{value:"inactive",children:"غير نشط فقط"})]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(i,{href:route("representatives.customers.create"),className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-300 text-lg font-medium shadow-lg",children:[e.jsx(g,{className:"w-5 h-5"}),"إضافة عميل جديد"]})}),d.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(o,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"لا توجد عملاء"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"لم يتم العثور على عملاء بالمعايير المحددة"}),e.jsxs(i,{href:route("representatives.customers.create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(g,{className:"w-4 h-4"}),"إضافة أول عميل"]})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{children:s.phone})]}),s.location_text&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-32",children:s.location_text})]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"نشط":"غير نشط"})]}),s.notes&&e.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded text-sm text-gray-700",children:[e.jsx(k,{className:"inline w-3 h-3 ml-1"}),s.notes]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{href:route("representatives.customers.show",s.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(i,{href:route("representatives.customers.edit",s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(M,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>f(s.id,s.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["تاريخ الإضافة: ",s.created_at]})]},s.id))})]})]})};export{$ as default};
