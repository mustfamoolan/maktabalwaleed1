import{r as h,j as e,H as v,L as x,a as w}from"./app-DLu82VbL.js";import{A as S}from"./AdminLayout-TR3F2rdb.js";import{J as p,N as j,F as k,i as y,s as F,d as C,h as L,k as _,E as $,l as D,j as T}from"./index-UdTL3sIO.js";/* empty css            */const H=({preparers:i,flash:c})=>{const[r,N]=h.useState(""),[d,g]=h.useState("created_at"),[o,m]=h.useState("desc"),u=[...i.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.phone.includes(r))].sort((s,l)=>{let t=s[d],n=l[d];return typeof t=="string"&&(t=t.toLowerCase(),n=n.toLowerCase()),o==="asc"?t>n?1:-1:t<n?1:-1}),a=s=>{d===s?m(o==="asc"?"desc":"asc"):(g(s),m("asc"))},b=s=>{confirm(`هل أنت متأكد من حذف المجهز "${s.name}"؟`)&&w.delete(`/admin/preparers/${s.id}`,{preserveScroll:!0})},f=s=>s?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"نشط"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"غير نشط"]});return e.jsxs(S,{title:"إدارة المجهزين",children:[e.jsx(v,{title:"إدارة المجهزين"}),e.jsxs("div",{className:"space-y-6",children:[c?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:c.success}),c?.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c.error}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المجهزين"}),e.jsx("p",{className:"text-gray-600",children:"إدارة وتتبع جميع المجهزين في النظام"})]})]}),e.jsxs(x,{href:"/admin/preparers/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"إضافة مجهز جديد"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"إجمالي المجهزين"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:i.length})]}),e.jsx(k,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"المجهزين النشطين"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:i.filter(s=>s.is_active).length})]}),e.jsx(y,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"إجمالي الرواتب"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:[i.reduce((s,l)=>s+(parseFloat(l.salary)||0),0).toLocaleString("en-US")," د.ع"]})]}),e.jsx(F,{className:"w-8 h-8 text-yellow-500"})]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"البحث عن مجهز (الاسم أو رقم الهاتف)...",value:r,onChange:s=>N(s.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("select",{value:`${d}-${o}`,onChange:s=>{const[l,t]=s.target.value.split("-");g(l),m(t)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"created_at-desc",children:"الأحدث أولاً"}),e.jsx("option",{value:"created_at-asc",children:"الأقدم أولاً"}),e.jsx("option",{value:"name-asc",children:"الاسم (أ-ي)"}),e.jsx("option",{value:"name-desc",children:"الاسم (ي-أ)"}),e.jsx("option",{value:"salary-desc",children:"الراتب (الأعلى أولاً)"}),e.jsx("option",{value:"salary-asc",children:"الراتب (الأقل أولاً)"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مجهزين"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r?"لم يتم العثور على مجهزين مطابقين للبحث":"لم يتم إضافة أي مجهزين بعد"}),!r&&e.jsxs(x,{href:"/admin/preparers/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"إضافة أول مجهز"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>a("name"),children:"اسم المجهز"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>a("phone"),children:"رقم الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>a("salary"),children:"الراتب الأساسي"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>a("is_active"),children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>a("created_at"),children:"تاريخ الإضافة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:s.name.charAt(0)}),e.jsxs("div",{className:"mr-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(L,{className:"w-4 h-4 ml-2 text-gray-400"}),s.phone]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.salary?`${parseFloat(s.salary).toLocaleString("en-US")} د.ع`:"غير محدد"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f(s.is_active)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("en-US")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(x,{href:`/admin/preparers/${s.id}`,className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"عرض التفاصيل",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx(x,{href:`/admin/preparers/${s.id}/edit`,className:"text-yellow-600 hover:text-yellow-900 p-1 rounded transition-colors",title:"تعديل",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(s),className:"text-red-600 hover:text-red-900 p-1 rounded transition-colors",title:"حذف",children:e.jsx(D,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]})};export{H as default};
