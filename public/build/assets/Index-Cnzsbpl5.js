import{r as x,u as Y,j as e,H as Z,a as y}from"./app-C7cjIxtJ.js";import{A as ee}from"./AdminLayout-CBAZUsRv.js";import{c as f}from"./createLucideIcon-OegKdwhO.js";import{P as se}from"./plus-EaxzMuIf.js";import{D as te}from"./dollar-sign-C4ryzcvL.js";import{T as re,S as ae,P as le,a as ie}from"./triangle-alert-6oTE0uUT.js";import{C as ne}from"./calendar-B5ZOSRYS.js";import"./app-D2X_br3j.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oe=f("chart-column",ce);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xe=f("circle-check-big",de);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],E=f("circle-x",me);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],M=f("package",ue);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],he=f("qr-code",ge);function Se({products:c,suppliers:P,categories:I,productCategories:pe}){const[A,u]=x.useState(!1),[j,v]=x.useState(null),[g,T]=x.useState(""),[N,V]=x.useState(""),[F,be]=x.useState(""),[h,D]=x.useState("all"),[p,S]=x.useState("all"),[m,_]=x.useState(1),[o,O]=x.useState(10),{data:r,setData:l,post:ye,processing:L,errors:i,reset:q}=Y({name_ar:"",name_en:"",description:"",supplier_id:"",category_id:"",barcode:"",barcode_type:"auto",purchase_price:"",selling_price:"",wholesale_price:"",stock_quantity:"",min_stock_level:"",expiry_date:"",image:null,is_active:!0}),n={total:c.length,active:c.filter(s=>s.is_active).length,inactive:c.filter(s=>!s.is_active).length,lowStock:c.filter(s=>(s.stock_quantity||0)<=(s.min_stock_level||0)).length,outOfStock:c.filter(s=>(s.stock_quantity||0)===0).length,totalValue:c.reduce((s,t)=>s+(t.selling_price||0)*(t.stock_quantity||0),0),totalPurchaseValue:c.reduce((s,t)=>s+(t.purchase_price||0)*(t.stock_quantity||0),0),expiringSoon:c.filter(s=>{if(!s.expiry_date)return!1;const t=Math.ceil((new Date(s.expiry_date)-new Date)/(1e3*60*60*24));return t<=30&&t>=0}).length},b=c.filter(s=>{const t=s.name_ar?.toLowerCase().includes(g.toLowerCase())||s.name_en?.toLowerCase().includes(g.toLowerCase())||s.barcode?.toLowerCase().includes(g.toLowerCase()),a=!N||s.supplier_id==N,J=!F||s.category_id==F,K=h==="all"||h==="active"&&s.is_active||h==="inactive"&&!s.is_active,C=s.stock_quantity||0,z=s.min_stock_level||0,W=p==="all"||p==="in_stock"&&C>z||p==="low_stock"&&C<=z&&C>0||p==="out_of_stock"&&C===0;return t&&a&&J&&K&&W}),w=Math.ceil(b.length/o),Q=b.slice((m-1)*o,m*o),k=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0).replace("IQD","").trim()+" IQD",d=s=>new Intl.NumberFormat("en-US").format(s||0),U=s=>{const t=s.stock_quantity||0,a=s.min_stock_level||0;return t===0?"text-red-600 bg-red-100":t<=a?"text-orange-600 bg-orange-100":"text-green-600 bg-green-100"},H=s=>{const t=s.stock_quantity||0,a=s.min_stock_level||0;return t===0?"نفدت الكمية":t<=a?"كمية قليلة":"متوفر"},B=s=>{s.preventDefault();const t=new FormData;Object.keys(r).forEach(a=>{r[a]!==null&&r[a]!==void 0&&r[a]!==""&&(a==="image"&&r[a]instanceof File?t.append(a,r[a]):a==="is_active"?t.append(a,r[a]?"1":"0"):t.append(a,r[a]))}),j?(t.append("_method","PUT"),y.post(route("admin.products.update",j.id),t,{forceFormData:!0,onSuccess:()=>{u(!1),v(null),q()},onError:a=>{console.error("خطأ في التحديث:",a)}})):y.post(route("admin.products.store"),t,{forceFormData:!0,onSuccess:()=>{u(!1),q()},onError:a=>{console.error("خطأ في الإضافة:",a)}})},R=s=>{v(s),l({name_ar:s.name_ar||"",name_en:s.name_en||"",description:s.description||"",supplier_id:s.supplier_id||"",category_id:s.category_id||"",barcode:s.barcode||"",barcode_type:s.barcode_type||"auto",purchase_price:s.purchase_price||"",selling_price:s.selling_price||"",wholesale_price:s.wholesale_price||"",stock_quantity:s.stock_quantity||"",min_stock_level:s.min_stock_level||"",expiry_date:s.expiry_date||"",image:null,is_active:s.is_active}),u(!0)},X=s=>{confirm("هل أنت متأكد من حذف هذا المنتج؟")&&y.delete(route("admin.products.destroy",s.id))},G=s=>{y.post(route("admin.products.toggle-status",s.id))},$=()=>{v(null),u(!1),q()};return e.jsxs(ee,{children:[e.jsx(Z,{title:"إدارة المنتجات"}),e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"لوحة تحكم المنتجات"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة المنتجات والمخزون"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>y.get(route("admin.products.table")),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(oe,{className:"w-5 h-5"}),"عرض الجدول"]}),e.jsxs("button",{onClick:()=>{v(null),u(!0)},className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors shadow-lg",children:[e.jsx(se,{className:"w-5 h-5"}),"إضافة منتج جديد"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"إجمالي المنتجات"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:d(n.total)}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["نشط: ",d(n.active)," | غير نشط: ",d(n.inactive)]})]}),e.jsx("div",{className:"p-3 bg-blue-200 rounded-full",children:e.jsx(M,{className:"w-8 h-8 text-blue-700"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"قيمة المخزون"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:k(n.totalValue)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"القيمة الإجمالية"})]}),e.jsx("div",{className:"p-3 bg-green-200 rounded-full",children:e.jsx(te,{className:"w-8 h-8 text-green-700"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-700",children:"تنبيهات المخزون"}),e.jsx("p",{className:"text-3xl font-bold text-orange-900",children:d(n.lowStock+n.outOfStock)}),e.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["قليل: ",d(n.lowStock)," | نفد: ",d(n.outOfStock)]})]}),e.jsx("div",{className:"p-3 bg-orange-200 rounded-full",children:e.jsx(re,{className:"w-8 h-8 text-orange-700"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"منتهية الصلاحية"}),e.jsx("p",{className:"text-3xl font-bold text-red-900",children:d(n.expiringSoon)}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"خلال 30 يوم"})]}),e.jsx("div",{className:"p-3 bg-red-200 rounded-full",children:e.jsx(ne,{className:"w-8 h-8 text-red-700"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"جميع المنتجات"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:o,onChange:s=>{O(Number(s.target.value)),_(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:5,children:"5 في الصفحة"}),e.jsx("option",{value:10,children:"10 في الصفحة"}),e.jsx("option",{value:15,children:"15 في الصفحة"}),e.jsx("option",{value:20,children:"20 في الصفحة"}),e.jsx("option",{value:25,children:"25 في الصفحة"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"البحث في المنتجات...",value:g,onChange:s=>T(s.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("select",{value:N,onChange:s=>V(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"جميع الموردين"}),P.map(s=>e.jsx("option",{value:s.id,children:s.name_ar},s.id))]}),e.jsxs("select",{value:h,onChange:s=>D(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"inactive",children:"غير نشط"})]}),e.jsxs("select",{value:p,onChange:s=>S(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المخزون"}),e.jsx("option",{value:"in_stock",children:"متوفر"}),e.jsx("option",{value:"low_stock",children:"كمية قليلة"}),e.jsx("option",{value:"out_of_stock",children:"نفدت الكمية"})]})]})]}),e.jsx("div",{className:`overflow-auto border border-gray-200 rounded-lg ${o<=5?"max-h-96":o<=10?"max-h-[500px]":o<=15?"max-h-[600px]":"max-h-[700px]"}`,children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"المنتج"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"السعر"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"المخزون"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:s.image?e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:`/storage/${s.image}`,alt:s.name_ar}):e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center",children:e.jsx(M,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name_ar}),s.name_en&&e.jsx("div",{className:"text-sm text-gray-500",children:s.name_en}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),s.barcode||"لا يوجد باركود"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:k(s.selling_price)}),s.wholesale_price&&e.jsxs("div",{className:"text-gray-500",children:["جملة: ",k(s.wholesale_price)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[d(s.stock_quantity)," وحدة"]}),e.jsxs("div",{className:"text-gray-500",children:["الحد الأدنى: ",d(s.min_stock_level)]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(s)}`,children:H(s)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[s.is_active?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"نشط"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"غير نشط"}),s.supplier&&e.jsx("div",{className:"text-xs text-gray-500",children:s.supplier.name_ar})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>R(s),className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"تعديل",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(s),className:`p-1 rounded transition-colors ${s.is_active?"text-green-600 hover:text-green-900":"text-gray-400 hover:text-gray-600"}`,title:s.is_active?"إلغاء التفعيل":"تفعيل",children:s.is_active?e.jsx(xe,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>X(s),className:"text-red-600 hover:text-red-900 p-1 rounded transition-colors",title:"حذف",children:e.jsx(ie,{className:"w-4 h-4"})})]})})]},s.id))})]})}),w>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["عرض ",(m-1)*o+1," إلى ",Math.min(m*o,b.length)," من ",b.length," نتيجة"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>_(s=>Math.max(s-1,1)),disabled:m===1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),Array.from({length:w},(s,t)=>t+1).map(s=>e.jsx("button",{onClick:()=>_(s),className:`px-3 py-2 border rounded-lg text-sm font-medium ${m===s?"bg-purple-600 text-white border-purple-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>_(s=>Math.min(s+1,w)),disabled:m===w,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]})]}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"لا يوجد منتجات"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:g||N||h!=="all"?"لا توجد نتائج تطابق معايير البحث":"ابدأ بإضافة منتج جديد"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"المنتجات الأكثر قيمة"}),e.jsx("div",{className:"space-y-4",children:c.filter(s=>s.is_active).sort((s,t)=>(t.selling_price||0)*(t.stock_quantity||0)-(s.selling_price||0)*(s.stock_quantity||0)).slice(0,3).map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${t===0?"bg-yellow-500":t===1?"bg-gray-400":"bg-orange-600"}`,children:t+1})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name_ar}),e.jsx("p",{className:"text-xs text-gray-500",children:k((s.selling_price||0)*(s.stock_quantity||0))})]})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"تنبيهات المخزون"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"نفدت الكمية"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:n.outOfStock})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"كمية قليلة"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:n.lowStock})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"تنتهي قريباً"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-600",children:n.expiringSoon})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إجراءات سريعة"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>S("low_stock"),className:"w-full text-right px-4 py-2 bg-orange-50 text-orange-700 rounded-lg hover:bg-orange-100 transition-colors",children:"عرض المنتجات قليلة المخزون"}),e.jsx("button",{onClick:()=>S("out_of_stock"),className:"w-full text-right px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:"عرض المنتجات المنتهية"}),e.jsx("button",{onClick:()=>D("inactive"),className:"w-full text-right px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"عرض المنتجات غير النشطة"})]})]})]})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j?"تعديل المنتج":"إضافة منتج جديد"}),e.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(E,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:B,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المنتج (عربي) *"}),e.jsx("input",{type:"text",value:r.name_ar,onChange:s=>l("name_ar",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),i.name_ar&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.name_ar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المنتج (إنجليزي)"}),e.jsx("input",{type:"text",value:r.name_en,onChange:s=>l("name_en",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المورد *"}),e.jsxs("select",{value:r.supplier_id,onChange:s=>l("supplier_id",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"اختر المورد"}),P.map(s=>e.jsx("option",{value:s.id,children:s.name_ar},s.id))]}),i.supplier_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.supplier_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفئة"}),e.jsxs("select",{value:r.category_id,onChange:s=>l("category_id",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"اختر الفئة"}),I.map(s=>e.jsx("option",{value:s.id,children:s.name_ar},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الباركود"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.barcode,onChange:s=>l("barcode",s.target.value),disabled:r.barcode_type==="auto",placeholder:r.barcode_type==="auto"?"سيتم إنشاؤه تلقائياً":"أدخل الباركود",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"}),e.jsxs("select",{value:r.barcode_type,onChange:s=>{l("barcode_type",s.target.value),s.target.value==="auto"&&l("barcode","")},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"auto",children:"تلقائي"}),e.jsx("option",{value:"manual",children:"يدوي"})]})]}),i.barcode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.barcode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الشراء *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.purchase_price,onChange:s=>l("purchase_price",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),i.purchase_price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.purchase_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر البيع *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.selling_price,onChange:s=>l("selling_price",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),i.selling_price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.selling_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الجملة"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.wholesale_price,onChange:s=>l("wholesale_price",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كمية المخزون *"}),e.jsx("input",{type:"number",min:"0",value:r.stock_quantity,onChange:s=>l("stock_quantity",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),i.stock_quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.stock_quantity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للمخزون *"}),e.jsx("input",{type:"number",min:"0",value:r.min_stock_level,onChange:s=>l("min_stock_level",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),i.min_stock_level&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.min_stock_level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء الصلاحية"}),e.jsx("input",{type:"date",value:r.expiry_date,onChange:s=>l("expiry_date",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),e.jsx("textarea",{value:r.description,onChange:s=>l("description",s.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة المنتج"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>l("image",s.target.files[0]),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),i.image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.image})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:s=>l("is_active",s.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"mr-2 block text-sm text-gray-900",children:"منتج نشط"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:$,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:L,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:L?"جاري الحفظ...":j?"تحديث":"حفظ"})]})]})]})})]})}export{Se as default};
