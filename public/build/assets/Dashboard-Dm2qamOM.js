import{r as l,j as e,H as v}from"./app-DLu82VbL.js";import{A as f}from"./AdminLayout-TR3F2rdb.js";import{s as w,t as _,q as F,u as I,v as C,w as S}from"./index-UdTL3sIO.js";/* empty css            */function Q({statistics:x={},recent_invoices:m=[],representatives_performance:c=[],low_stock_products:i=[],top_debtors:d=[],sales_chart:D=[]}){const[a,g]=l.useState(x),[o,h]=l.useState(m),[j,u]=l.useState(new Date().toLocaleTimeString());l.useEffect(()=>{const s=setInterval(()=>{fetch("/admin/live-stats").then(t=>t.json()).then(t=>{g(N=>({...N,...t})),u(t.last_update)}).catch(console.error)},3e4);return()=>clearInterval(s)},[]),l.useEffect(()=>{const s=setInterval(()=>{fetch("/admin/recent-activity").then(t=>t.json()).then(t=>{h(t)}).catch(console.error)},6e4);return()=>clearInterval(s)},[]);const r=s=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0).replace("IQD","د.ع"),n=s=>new Intl.NumberFormat("ar-IQ").format(s||0),p=s=>({pending:"bg-yellow-100 text-yellow-800",preparing:"bg-blue-100 text-blue-800",shipping:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",returned:"bg-orange-100 text-orange-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",y=s=>({pending:"قيد الانتظار",preparing:"قيد التجهيز",shipping:"قيد التوصيل",delivered:"تم التسليم",returned:"مسترجع",cancelled:"ملغية"})[s]||s,b=[{title:"مبيعات اليوم",value:r(a.total_sales_today),icon:e.jsx(w,{}),color:"bg-gradient-to-r from-green-400 to-green-600",change:"+12%",changeColor:"text-green-600"},{title:"فواتير اليوم",value:n(a.total_invoices_today),icon:e.jsx(_,{}),color:"bg-gradient-to-r from-blue-400 to-blue-600",change:"+8%",changeColor:"text-blue-600"},{title:"فواتير معلقة",value:n(a.total_invoices_pending),icon:e.jsx(F,{}),color:"bg-gradient-to-r from-yellow-400 to-yellow-600",change:"-3%",changeColor:"text-red-600"},{title:"إجمالي الديون",value:r(a.total_debt_amount),icon:e.jsx(I,{}),color:"bg-gradient-to-r from-red-400 to-red-600",change:"+5%",changeColor:"text-red-600"},{title:"منتجات منخفضة",value:n(a.low_stock_count),icon:e.jsx(C,{}),color:"bg-gradient-to-r from-orange-400 to-orange-600",change:"+2",changeColor:"text-orange-600"}];return e.jsxs(f,{children:[e.jsx(v,{title:"لوحة التحكم - الإدارة"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"لوحة تحكم الإدارة"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"نظرة شاملة على النشاط التجاري"})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["آخر تحديث: ",j]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(S,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:b.map((s,t)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.value})]}),e.jsx("div",{className:`${s.color} p-3 rounded-lg text-white`,children:s.icon})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:`text-sm font-medium ${s.changeColor}`,children:s.change}),e.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"من الأمس"})]})]})},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"آخر الفواتير"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[o.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["فاتورة #",s.invoice_number," - ",r(s.total_amount)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.representative?.name," - ",s.customer?.customer_name]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(s.status)}`,children:y(s.status)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.created_at})]})]},t)),o.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد فواتير حديثة"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"أداء المندوبين اليوم"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[c.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r(s.total_sales)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.invoices_count," فاتورة"]})]})]},t)),c.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا يوجد نشاط اليوم"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"منتجات منخفضة المخزن"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[i.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.supplier_type?.name})]}),e.jsx("div",{className:"text-left",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.cartons_count===0?"bg-red-100 text-red-800":s.cartons_count<5?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[s.cartons_count," كرتون"]})})]},t)),i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"جميع المنتجات متوفرة"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"أعلى المدينين"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[d.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.customer_name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.representative?.name})]}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"text-sm font-medium text-red-600",children:r(s.total_debt)})})]},t)),d.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد ديون"})]})})]})]})]})]})}export{Q as default};
