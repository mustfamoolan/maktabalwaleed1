import{j as e,H as j,L as y}from"./app-nFOrUbza.js";import{R as v}from"./RepresentativeLayout-7ylgactW.js";import{W as o,Y as x,_ as m,x as g,U as N,$ as f}from"./index-CQIIe2w9.js";/* empty css            */const q=({representative_user:w,currentTargets:l=[],multiProductPlans:i=[],categoryPlans:d=[],supplierPlans:c=[]})=>{const s=(()=>{const t=(l?.length||0)+(i?.length||0)+(d?.length||0)+(c?.length||0),a=(l?.filter(r=>r.is_achieved)?.length||0)+(i?.filter(r=>r.status==="completed")?.length||0)+(d?.filter(r=>r.status==="completed")?.length||0)+(c?.filter(r=>r.status==="completed")?.length||0),b=t-a,p=t>0?Math.round(a/t*100):0;return{totalTargets:t,completedTargets:a,activeTargets:b,overallAchievement:p}})(),h=[{title:"إجمالي الأهداف",value:s.totalTargets.toString(),icon:e.jsx(o,{}),color:"bg-blue-500",bgColor:"bg-blue-50"},{title:"الأهداف المكتملة",value:s.completedTargets.toString(),icon:e.jsx(x,{}),color:"bg-green-500",bgColor:"bg-green-50"},{title:"الأهداف النشطة",value:s.activeTargets.toString(),icon:e.jsx(m,{}),color:"bg-orange-500",bgColor:"bg-orange-50"},{title:"معدل الإنجاز",value:`${s.overallAchievement}%`,icon:e.jsx(g,{}),color:"bg-purple-500",bgColor:"bg-purple-50"}],n=[...l?.map(t=>({id:t.id,title:`هدف المنتج: ${t.product?.name_ar||t.product?.name_en||"منتج غير محدد"}`,description:`بيع ${t.target_quantity} وحدة`,progress:t.achievement_percentage||0,deadline:t.target_date,status:t.is_achieved?"مكتمل":"جاري",statusColor:t.is_achieved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",type:"individual"}))||[],...i?.map(t=>({id:`multi-${t.id}`,title:t.plan_name||"خطة متعددة المنتجات",description:`هدف: ${t.total_target_quantity} وحدة من ${t.products?.length||0} منتج`,progress:t.completion_percentage||0,deadline:t.end_date,status:t.status==="completed"?"مكتمل":t.status==="expired"?"منتهي":"جاري",statusColor:t.status==="completed"?"bg-green-100 text-green-800":t.status==="expired"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",type:"multi"}))||[],...d?.map(t=>({id:`category-${t.id}`,title:`خطة القسم: ${t.supplier_category?.name||"قسم غير محدد"}`,description:`بيع ${t.target_quantity} وحدة`,progress:t.achievement_percentage||0,deadline:t.end_date,status:t.status==="completed"?"مكتمل":t.status==="expired"?"منتهي":"جاري",statusColor:t.status==="completed"?"bg-green-100 text-green-800":t.status==="expired"?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800",type:"category"}))||[],...c?.map(t=>({id:`supplier-${t.id}`,title:`خطة المورد: ${t.supplier?.name||"مورد غير محدد"}`,description:`بيع ${t.target_quantity} وحدة`,progress:t.achievement_percentage||0,deadline:t.end_date,status:t.status==="completed"?"مكتمل":t.status==="expired"?"منتهي":"جاري",statusColor:t.status==="completed"?"bg-green-100 text-green-800":t.status==="expired"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800",type:"supplier"}))||[]],u=t=>t>=80?"bg-green-500":t>=50?"bg-yellow-500":"bg-red-500";return e.jsxs(v,{title:"الأهداف والخطط",children:[e.jsx(j,{title:"الأهداف والخطط"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:h.map((t,a)=>e.jsx("div",{className:`${t.bgColor} rounded-xl p-4 border border-gray-200`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.value})]}),e.jsx("div",{className:`${t.color} w-10 h-10 rounded-lg flex items-center justify-center text-white`,children:t.icon})]})},a))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"الأهداف الحالية"})]}),e.jsx(y,{href:"/representatives/dashboard",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"العودة للداشبورد"})]})}),e.jsx("div",{className:"p-6",children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(N,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:t.deadline})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.statusColor}`,children:t.status}),e.jsxs("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full",children:[t.type==="individual"&&"هدف فردي",t.type==="multi"&&"خطة متعددة",t.type==="category"&&"خطة قسم",t.type==="supplier"&&"خطة مورد"]})]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t.progress),"%"]})})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u(t.progress)}`,style:{width:`${t.progress}%`}})})]},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(o,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"لا توجد أهداف حالياً"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"يمكن للإدارة إضافة أهداف لك من لوحة التحكم"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"الأداء الشهري"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(f,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"أهداف مكتملة"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.completedTargets}),e.jsxs("p",{className:"text-sm text-gray-500",children:["من أصل ",s.totalTargets]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(x,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"معدل النجاح"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[s.overallAchievement,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"الإنجاز العام"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(m,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"أهداف نشطة"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:s.activeTargets}),e.jsx("p",{className:"text-sm text-gray-500",children:"جاري العمل عليها"})]})]})})]})]})]})};export{q as default};
